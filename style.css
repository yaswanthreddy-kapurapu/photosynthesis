:root{
  --bg:#f3faf7; --panel:#ffffff; --muted:#6a6f6b; --accent:#2a9d8f; --danger:#e76f51; --sun:#ffd166; --leaf:#0b6623;
}
*{box-sizing:border-box}
body{font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:linear-gradient(180deg,#e6faf3, #f3fbff);color:#1f332b}
.app-header{padding:18px 24px;border-bottom:1px solid rgba(0,0,0,0.04)}
.app-header h1{margin:0;font-size:1.25rem;color:var(--leaf)}
.tag{margin:4px 0 0;color:var(--muted)}
.layout{display:grid;grid-template-columns:260px 1fr 360px;gap:18px;padding:18px}
.controls{background:var(--panel);padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(5,22,12,0.06)}
.controls label{display:block;margin:10px 0;font-size:.95rem}
.controls input[type=range]{width:100%}
.controls .toggles{display:flex;gap:8px;margin-top:8px}
.canvas-area{background:linear-gradient(180deg,#ffffff, #eafff2);padding:12px;border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;box-shadow:0 6px 18px rgba(5,22,12,0.04)}
.canvas-area canvas{border-radius:8px;background:linear-gradient(180deg,#e9fff2,#e6f5ff)}
.visuals{display:flex;flex-direction:column;gap:12px}
.card{background:var(--panel);padding:12px;border-radius:8px;box-shadow:0 4px 12px rgba(8,23,8,0.04)}
.card.small{padding:10px;font-size:.95rem}
.meter{height:14px;background:#e9f8f4;border-radius:8px;overflow:hidden;margin:8px 0;position:relative}
.meter .bar{height:100%;width:40%;background:linear-gradient(90deg,var(--sun),var(--accent));transition:width 300ms ease}
.meter small{position:absolute;right:6px;top:-20px;color:var(--muted);font-size:.8rem}
.global-index{font-weight:600}
.g-indicator{height:18px;width:100%;border-radius:8px;margin-top:8px;background:#cfeee1}
.legend{margin-top:12px;color:var(--muted);font-size:.85rem}
.legend-small{margin-top:8px;color:var(--muted);font-size:.85rem}
footer{padding:12px;text-align:center;color:var(--muted)}
@media(max-width:980px){.layout{grid-template-columns:1fr;grid-auto-rows:auto}.visuals{order:3}.controls{order:1}.canvas-area{order:2}}

/* Presets */
.presets{display:flex;gap:8px;align-items:center;margin:8px 0}
.preset{background:#f6fff9;border:1px solid #dff3ea;padding:6px 8px;border-radius:6px;cursor:pointer;font-size:.9rem}
.preset.active{background:var(--accent);color:white}
.preset.danger{background:#ffecee;border-color:#ffd6d0;color:#8a2b1b}

/* Tooltips */
.help{font-size:0.9rem;margin-left:8px;color:#3a3a3a;cursor:help}
.tooltip-box{position:absolute;z-index:9999;background:rgba(10,20,12,0.95);color:white;padding:8px 10px;border-radius:8px;box-shadow:0 6px 18px rgba(2,12,6,0.35);font-size:.85rem;max-width:240px;pointer-events:none}

/* Carbon particles */
.flowPath{stroke-linecap:round;opacity:0.9}
.particle{filter:drop-shadow(0 2px 3px rgba(0,0,0,0.08))}

/* Tour overlay */
.tour-overlay{position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(10,15,12,0.48);display:none;align-items:center;justify-content:center;z-index:10000}
.tour-overlay[aria-hidden="false"]{display:flex}
.tour-card{background:white;color:#09271a;padding:18px;border-radius:10px;max-width:540px;box-shadow:0 12px 40px rgba(5,20,10,0.6)}
.tour-card h3{margin:0 0 8px}
.tour-controls{display:flex;gap:8px;margin-top:12px}
.tour-controls button{padding:8px 10px;border-radius:6px;border:1px solid rgba(0,0,0,0.06);cursor:pointer}
.tour-hint{margin-top:10px;color:#5c6f62;font-size:.9rem}

/* highlight helper for tour steps */
.highlight{position:relative;box-shadow:0 0 0 4px rgba(42,157,143,0.14), 0 6px 18px rgba(3,15,10,0.15);border-radius:8px;transition:box-shadow 200ms ease}

/* Tuning panel */
.tuning-panel{margin-top:8px}
.tuning-controls{display:flex;flex-direction:column;gap:8px;padding:10px}
.tuning-controls label{display:flex;align-items:center;gap:10px}
.tuning-controls input[type=range]{flex:1}
.tune-actions{display:flex;gap:8px;margin-top:8px}
.tune-actions .preset{padding:6px 8px}

/* Comparison panel */
.comparison-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
.comp-card{background:#f6fff9;border-radius:8px;padding:8px;display:flex;flex-direction:column;align-items:center}
.comp-card h4{margin:0 0 6px;color:var(--leaf)}
.comp-svg{width:160px;height:110px}
.comp-stats{font-size:.85rem;color:var(--muted);margin-top:6px}

.best-list{display:flex;flex-direction:column;gap:6px}
.best-item{display:flex;align-items:center;gap:8px;background:#fbfffd;padding:8px;border-radius:6px;border:1px solid #e7f4ee}
.best-item pre{margin:0;font-size:.82rem;background:transparent;border:0;color:#1f332b}
.best-item .actions{display:flex;gap:6px;margin-left:auto}


